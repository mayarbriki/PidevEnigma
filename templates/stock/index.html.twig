{% extends 'base-back.html.twig' %}

{% block title %}Stock Index
{% endblock %}

{% block body %}

	<main id="main" class="main">

		<div class="pagetitle">
			<h1>Stock Tables</h1>
			<nav>
				<ol class="breadcrumb">
					<li class="breadcrumb-item">
						<a href="index.html">Home</a>
					</li>
					<li class="breadcrumb-item">Tables</li>
					<li class="breadcrumb-item active">Stock</li>
				</ol>
			</nav>
		</div>
		<!-- End Page Title -->

		<section class="section">
			<div class="row">
				<div class="col-lg-12">

					<div class="card">
						<div class="card-body">
							<h5 class="card-title">Stock Table</h5>
                            
                            <div class="card">
                                <div class="card-body">
                                 
                    
                                  <!-- Disabled Backdrop Modal -->
                               <!-- Improved Modal -->

<!-- End Improved Modal -->

                                
                                </div>
                              </div>
							<!-- Table with stripped rows -->
							<div class="datatable-wrapper datatable-loading no-footer sortable searchable fixed-columns">
								<div class="datatable-top">
									<div class="datatable-dropdown">
										<label>
											<select class="datatable-selector">
												<option value="5">5</option>
												<option value="10" selected="">10</option>
												<option value="15">15</option>
												<option value="-1">All</option>
											</select>
											entries per page
										</label>
									</div>
									<div class="datatable-search">
										<input class="datatable-input" placeholder="Search..." type="search" title="Search within table">
									</div>
								</div>
								<div class="datatable-container">
									<table class="table datatable datatable-table">
										<thead>
											<tr>
												<th data-sortable="true" style="width: 15.805385556915546%;">
													<button class="datatable-sorter">
														<b>Id</b>
													</button>
												</th>
												<th data-sortable="true" style="width: 15%;">
													<button class="datatable-sorter">Nom Produit</button>
												</th>
												<th data-sortable="true" style="width: 15%;">
													<button class="datatable-sorter">Quantité Entrée</button>
												</th>
												<th data-format="YYYY/DD/MM" data-sortable="true" data-type="date" style="width:15%;">
													<button class="datatable-sorter">Quantité Sortie</button>
												</th>
												<th data-sortable="true" class="red" style="width: 15%;">
													<button class="datatable-sorter">Quantité Restante</button>
												</th>
												<th data-sortable="true" class="red" style="width: 15%;">
													<button class="datatable-sorter">Date</button>

												</th>
												<th data-sortable="true" class="red" style="width: 15%;">
													<button class="datatable-sorter">Fournisseur</button>

												</th>
												<th data-sortable="true" class="red" style="width:15%;">
													<button class="datatable-sorter">Actions</button>

												</th>
											</tr>
										</thead>
										<tbody>
											{% for stock in stocks %}
												<tr data-index="0" >
													<td>{{ stock.id }}</td>
													<td>{{ stock.nomProduit }}</td>
													<td>{{ stock.quantiteEntre }}</td>
													<td>{{ stock.quantiteSortie }}</td>
													<td>{{ stock.quantiteRestante }}</td>
													<td>{{ stock.date ? stock.date|date('Y-m-d') : 'N/A' }}</td>
													<td>{{ stock.fournisseur ? stock.fournisseur.getNom()   : 'N/A' }}</td>
													<td>
														<button class="btn btn-info rounded-pill "><a href="{{ path('stock_show', {'id': stock.id}) }}"  style="color:white;" >Show</a></button>
														<button class="btn btn-success rounded-pill"><a href="{{ path('stock_edit', {'id': stock.id}) }}"  style="color:white;">Edit</a></button>
														<form method="post" action="{{ path('stock_delete', {'id': stock.id}) }}" style="display: inline-block;">
															<input type="hidden" name="_method" value="DELETE">
															<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ stock.id) }}">
															<button type="submit" class="btn btn-danger rounded-pill">Delete</button>
														</form>
													</td>
												</tr>

											{% else %}
												<tr>
													<td colspan="8">No records found</td>
												</tr>
											{% endfor %}
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#productModal">
    Add New Product
</button>

<div class="modal fade" id="productModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add New Product to Supply Stock</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                {{ form_start(form) }}
                
                <div class="mb-3">
                    {{ form_label(form.nom_produit, 'Product Name') }}
                    {{ form_widget(form.nom_produit, {'attr': {'class': 'form-control'}}) }}
                </div>

                <div class="mb-3">
                    {{ form_label(form.quantite_entre, 'Quantity In') }}
                    {{ form_widget(form.quantite_entre, {'attr': {'class': 'form-control'}}) }}
                </div>

                <div class="mb-3">
                    {{ form_label(form.quantite_sortie, 'Quantity Out') }}
                    {{ form_widget(form.quantite_sortie, {'attr': {'class': 'form-control'}}) }}
                </div>

                <div class="mb-3">
                    {{ form_label(form.quantite_restante, 'Remaining Quantity') }}
                    {{ form_widget(form.quantite_restante, {'attr': {'class': 'form-control'}}) }}
                </div>

                <div class="mb-3">
                    {{ form_label(form.date, 'Date') }}
                    {{ form_widget(form.date, {'attr': {'class': 'form-control'}}) }}
                </div>

                <div class="mb-3">
                    {{ form_label(form.fournisseur, 'Supplier') }}
                    {{ form_widget(form.fournisseur, {'attr': {'class': 'form-select'}}) }}
                </div>
                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
            {{ form_end(form) }}
        </div>
    </div>
</div>
										</tbody>
									</table>
								</div>
								<div class="datatable-bottom">
									<div class="datatable-info">Showing 1 to 10 of 100 entries</div>
									<nav class="datatable-pagination">
										<ul class="datatable-pagination-list">
											<li class="datatable-pagination-list-item datatable-hidden datatable-disabled">
												<button data-page="1" class="datatable-pagination-list-item-link" aria-label="Page 1">‹</button>
											</li>
											<li class="datatable-pagination-list-item datatable-active">
												<button data-page="1" class="datatable-pagination-list-item-link" aria-label="Page 1">1</button>
											</li>
											<li class="datatable-pagination-list-item">
												<button data-page="2" class="datatable-pagination-list-item-link" aria-label="Page 2">2</button>
											</li>
											<li class="datatable-pagination-list-item">
												<button data-page="3" class="datatable-pagination-list-item-link" aria-label="Page 3">3</button>
											</li>
											<li class="datatable-pagination-list-item">
												<button data-page="4" class="datatable-pagination-list-item-link" aria-label="Page 4">4</button>
											</li>
											<li class="datatable-pagination-list-item">
												<button data-page="5" class="datatable-pagination-list-item-link" aria-label="Page 5">5</button>
											</li>
											<li class="datatable-pagination-list-item">
												<button data-page="6" class="datatable-pagination-list-item-link" aria-label="Page 6">6</button>
											</li>
											<li class="datatable-pagination-list-item">
												<button data-page="7" class="datatable-pagination-list-item-link" aria-label="Page 7">7</button>
											</li>
											<li class="datatable-pagination-list-item datatable-ellipsis datatable-disabled">
												<button class="datatable-pagination-list-item-link">…</button>
											</li>
											<li class="datatable-pagination-list-item">
												<button data-page="10" class="datatable-pagination-list-item-link" aria-label="Page 10">10</button>
											</li>
											<li class="datatable-pagination-list-item">
												<button data-page="2" class="datatable-pagination-list-item-link" aria-label="Page 2">›</button>
											</li>
										</ul>
									</nav>
								</div>
							</div>
							<!-- End Table with stripped rows -->

						</div>
					</div>

				</div>
			</div>
		</section>
       
	</main>
{% endblock %}
