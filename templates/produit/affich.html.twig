{% extends 'base.html.twig' %}

{% block title %}Produit{% endblock %}


{% block body %}




<section id="mobile-products" class="product-store position-relative padding-large no-padding-top">
    <div class="container">
        <div class="row">
            <div class="display-header d-flex justify-content-between pb-3">
                <h2 class="display-7 text-dark text-uppercase">Nos produits</h2>
                <div class="btn-right">
                </div>
            </div>
            <div class="swiper product-swiper">
                <div class="swiper-wrapper">
                    {% for a in pagination %}
                    <div class="swiper-slide">
                        <div class="product-card position-relative">
                            <div class="image-holder">
                                <img style="border-radius: 30px;" src="{{asset('/uploads/produits/'~a.Image)}}"
                                    width="100%" height="150px" alt="product-item" class="">
                            </div>
                            <div class="cart-concern position-absolute">
                                <div class="cart-button d-flex">
                                    {% if a.panier is empty %}
                                    <a href="/panier/{{a.id}}" class="btn btn-medium btn-black add-to-cart"
                                        data-product-id="{{a.id}}">Add to Cart<svg class="cart-outline">
                                            <use xlink:href="#cart-outline"></use>
                                        </svg></a>
                                    {% else %}

                                    <a class="btn btn-success  add-to-cart" data-product-id="{{a.id}}">Already In<svg
                                            style="color: green;" class="cart-outline">
                                            <use xlink:href="#cart-outline"></use>
                                        </svg></a>
                                    {% endif %}




                                </div>
                            </div>
                            <div class="card-detail d-flex justify-content-between align-items-baseline pt-3">
                                <h3 class="card-title text-uppercase">
                                    <a href="#">
                                        {{a.Nom }}
                                    </a>
                                </h3>
                                <span class="item-price text-primary">{{a.Prix }} TND</span>
                            </div>
                            <div class="card-footer text-center">
                                <button class="btn btn-secondary show-more" data-product-id="{{a.id}}">Show
                                    More</button>
                                <div class="description" style="display: none;" data-product-id="{{a.id}}">
                                    {{a.description}}
                                    <br>
                                </div>
                                <button class="btn btn-secondary show-less" style="display: none;"
                                    data-product-id="{{a.id}}">Show Less</button>
                            </div>
                        </div>
                    </div>

                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <div class="swiper-pagination position-absolute text-center"></div>
</section>




<nav class="app-pagination mt-5">
    <ul class="pagination justify-content-center">
        {{ knp_pagination_render(pagination) }}
    </ul>
</nav>


<script>

    document.addEventListener('DOMContentLoaded', function () {
        const showMoreBtns = document.querySelectorAll('.show-more');
        const showLessBtns = document.querySelectorAll('.show-less');
        const addToCartBtns = document.querySelectorAll('.add-to-cart');

        showMoreBtns.forEach(function (btn) {
            btn.addEventListener('click', function () {
                const productId = btn.dataset.productId;
                const description = document.querySelector('.description[data-product-id="' + productId + '"]');
                description.style.display = 'block';
                btn.style.display = 'none';
                document.querySelector('.show-less[data-product-id="' + productId + '"]').style.display = 'inline-block';
            });
        });

        showLessBtns.forEach(function (btn) {
            btn.addEventListener('click', function () {
                const productId = btn.dataset.productId;
                const description = document.querySelector('.description[data-product-id="' + productId + '"]');
                description.style.display = 'none';
                btn.style.display = 'none';
                document.querySelector('.show-more[data-product-id="' + productId + '"]').style.display = 'inline-block';
            });
        });

        addToCartBtns.forEach(function (btn) {
            btn.addEventListener('click', function () {
                const productId = btn.dataset.productId;
                console.log('Product added to cart with ID:', productId);
                // You can add more functionality here, such as adding the product to the cart
            });
        });
    });

</script>
{% endblock %}