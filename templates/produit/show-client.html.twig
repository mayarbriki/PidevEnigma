{% extends 'base.html.twig' %}

{% block title %}Produit
{% endblock %}


{% block body %}

<style>
    .rating {
        unicode-bidi: bidi-override;
        direction: rtl;
    }

    .rating>input {
        display: none;
    }

    .rating>label {
        display: inline-block;
        font-size: 5.5em;
        padding: 0 .1em;
        cursor: pointer;
        color: #ccc;
    }

    .rating>label:hover,
    .rating>label:hover~label,
    .rating>input:checked~label {
        color: #ffc107;
    }
</style>
<br><br><br><br>
<section id="mobile-products" class=" mt-2 product-store position-relative padding-large no-padding-top">
    <div class="container">

        <h2 class="display-7 text-dark text-uppercase">Product : {{a.Nom }}
        </h2>

        <h4 class="display-7 text-dark text-uppercase">Category : {{a.Categorys.libelle }}
        </h4>
        <h3 style="color: #ffc107;"> AVG Rating : {{avg | number_format(0)}} / 5 STARS </h3>



        <div class="row m-3">
            <div class=" col-7"> <img style="border-radius: 30px;" src="{{asset('/uploads/produits/'~a.Image)}}"
                    width="100%" height="30%" alt="product-item" class="">
                <div class="col-5">
                    <br>
                    {% if a.panier is empty %}
                    <a href="/panier/{{a.id}}" class="btn btn-medium btn-black" data-product-id="{{a.id}}">Add
                        to Cart
                        </svg>
                    </a>
                    {% else %}
                    <p class="btn btn-medium btn-success" data-product-id="{{a.id}}">Already In cart

                    </p>
                    {% endif %}
                </div>
            </div>
            <div class="col-5">
                <h1><b><i>{{a.prix}} TND</i></b></h1>
                <h5>{{a.description}} </h5>
                <form id="ratingForm">
                    <label style="direction: ltr;">
                        <h1>Rate:</h1>
                    </label>

                    <div class="rating">

                        <input type="radio" id="star5" name="rating" value="5" {% if a.rate==5 %}checked{% endif %} />
                        <label for="star5" title="5 stars">&#9733;</label>
                        <input type="radio" id="star4" name="rating" value="4" {% if a.rate==4 %}checked{% endif %} />
                        <label for="star4" title="4 stars">&#9733;</label>
                        <input type="radio" id="star3" name="rating" value="3" {% if a.rate==3 %}checked{% endif %} />
                        <label for="star3" title="3 stars">&#9733;</label>
                        <input type="radio" id="star2" name="rating" value="2" {% if a.rate==2 %}checked{% endif %} />
                        <label for="star2" title="2 stars">&#9733;</label>
                        <input type="radio" id="star1" name="rating" value="1" {% if a.rate==1 %}checked{% endif %} />
                        <label for="star1" title="1 star">&#9733;</label>
                    </div>

                </form>
                {% if a.rate %}
                <span style="color:green"> Thanks for your rating ! </span>
                {% endif %}

            </div>
            <div class="row">

            </div>
        </div>









</section>



<script>
    // JavaScript to submit the form when a star is clicked
    document.addEventListener('DOMContentLoaded', function () {
        var form = document.getElementById('ratingForm');
        var stars = form.elements.rating;

        for (var i = 0; i < stars.length; i++) {
            stars[i].addEventListener('change', function () {
                form.submit();
            });
        }
    });
</script>
{% endblock %}